<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Schedules</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- AOS for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    {% include 'index1.twig' %}
    <main class="py-5">
        <div class="container">
            <section class="content-section bg-white shadow-sm rounded-lg p-4 p-md-5">
                <h1 class="mb-4 text-center" data-aos="fade-up">Event Schedule</h1>
                <p class="lead text-center mb-5" data-aos="fade-up" data-aos-delay="100">Plan your Open Day visit with our comprehensive schedule of events and activities.</p>
                
                <!-- Event Filters -->
                <div class="row mb-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="col-md-6 mb-3 mb-md-0">
                        <div class="input-group">
                            <span class="input-group-text bg-primary text-white">
                                <i class="bi bi-search"></i>
                            </span>
                            <input type="text" id="event-search" class="form-control" placeholder="Search events...">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-group">
                            <span class="input-group-text bg-primary text-white">
                                <i class="bi bi-filter"></i>
                            </span>
                            <select id="event-filter" class="form-select">
                                <option value="all" selected>All Events</option>
                                <option value="talks">Talks & Presentations</option>
                                <option value="tours">Campus Tours</option>
                                <option value="workshops">Workshops</option>
                                <option value="activities">Activities</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Timeline Tabs -->
                <ul class="nav nav-tabs mb-4" id="eventTabs" role="tablist" data-aos="fade-up" data-aos-delay="300">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="morning-tab" data-bs-toggle="tab" data-bs-target="#morning" type="button" role="tab" aria-controls="morning" aria-selected="true">
                            <i class="bi bi-sunrise me-2"></i>Morning (9AM - 12PM)
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="afternoon-tab" data-bs-toggle="tab" data-bs-target="#afternoon" type="button" role="tab" aria-controls="afternoon" aria-selected="false">
                            <i class="bi bi-sun me-2"></i>Afternoon (12PM - 4PM)
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="evening-tab" data-bs-toggle="tab" data-bs-target="#evening" type="button" role="tab" aria-controls="evening" aria-selected="false">
                            <i class="bi bi-sunset me-2"></i>Evening (4PM - 7PM)
                        </button>
                    </li>
                </ul>
                
                <!-- Event Schedule Content -->
                <div class="tab-content" id="eventTabsContent" data-aos="fade-up" data-aos-delay="400">
                    <!-- Morning Events -->
                    <div class="tab-pane fade show active" id="morning" role="tabpanel" aria-labelledby="morning-tab">
                        {% if events is defined and events|length > 0 %}
                            {% for event in events %}
                                {% if event.start_time is defined and event.start_time and event.start_time|date("H") < 12 %}
                                    <div class="event mb-4 shadow-sm">
                                        <div class="row align-items-center">
                                            <div class="col-md-3 mb-3 mb-md-0">
                                                <div class="event-time d-flex align-items-center">
                                                    <i class="bi bi-clock me-2 text-primary fs-4"></i>
                                                    <div>
                                                        <div class="fw-bold">
                                                            {{ event.start_time is defined and event.start_time ? event.start_time|date("g:i A") : 'N/A' }} - 
                                                            {{ event.end_time is defined and event.end_time ? event.end_time|date("g:i A") : 'N/A' }}
                                                        </div>
                                                        <small class="text-muted">{{ event.duration ?? 'Duration varies' }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-7 mb-3 mb-md-0">
                                                <h2 class="h5 mb-1">{{ event.title | e }}</h2>
                                                <p class="mb-2">{{ event.description | e }}</p>
                                                <div class="d-flex align-items-center">
                                                    <i class="bi bi-geo-alt me-2 text-secondary"></i>
                                                    <span>{{ event.location | e }}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-2 text-md-end">
                                                <button class="btn btn-outline-primary add-reminder" 
                                                    data-event-name="{{ event.title | e('html_attr') }}" 
                                                    data-event-time="{{ event.start_time | e('html_attr') }}">
                                                    <i class="bi bi-calendar-plus"></i> Add
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle-fill me-2"></i>
                                No morning events scheduled.
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Afternoon Events -->
                    <div class="tab-pane fade" id="afternoon" role="tabpanel" aria-labelledby="afternoon-tab">
                        {% if events is defined and events|length > 0 %}
                            {% for event in events %}
                                {% if event.start_time is defined and event.start_time and event.start_time|date("H") >= 12 and event.start_time|date("H") < 16 %}
                                    <div class="event mb-4 shadow-sm">
                                        <div class="row align-items-center">
                                            <div class="col-md-3 mb-3 mb-md-0">
                                                <div class="event-time d-flex align-items-center">
                                                    <i class="bi bi-clock me-2 text-primary fs-4"></i>
                                                    <div>
                                                        <div class="fw-bold">
                                                            {{ event.start_time is defined and event.start_time ? event.start_time|date("g:i A") : 'N/A' }} - 
                                                            {{ event.end_time is defined and event.end_time ? event.end_time|date("g:i A") : 'N/A' }}
                                                        </div>
                                                        <small class="text-muted">{{ event.duration ?? 'Duration varies' }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-7 mb-3 mb-md-0">
                                                <h2 class="h5 mb-1">{{ event.title | e }}</h2>
                                                <p class="mb-2">{{ event.description | e }}</p>
                                                <div class="d-flex align-items-center">
                                                    <i class="bi bi-geo-alt me-2 text-secondary"></i>
                                                    <span>{{ event.location | e }}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-2 text-md-end">
                                                <button class="btn btn-outline-primary add-reminder" 
                                                    data-event-name="{{ event.title | e('html_attr') }}" 
                                                    data-event-time="{{ event.start_time | e('html_attr') }}">
                                                    <i class="bi bi-calendar-plus"></i> Add
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle-fill me-2"></i>
                                No afternoon events scheduled.
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Evening Events -->
                    <div class="tab-pane fade" id="evening" role="tabpanel" aria-labelledby="evening-tab">
                        {% if events is defined and events|length > 0 %}
                            {% for event in events %}
                                {% if event.start_time is defined and event.start_time and event.start_time|date("H") >= 16 %}
                                    <div class="event mb-4 shadow-sm">
                                        <div class="row align-items-center">
                                            <div class="col-md-3 mb-3 mb-md-0">
                                                <div class="event-time d-flex align-items-center">
                                                    <i class="bi bi-clock me-2 text-primary fs-4"></i>
                                                    <div>
                                                        <div class="fw-bold">
                                                            {{ event.start_time is defined and event.start_time ? event.start_time|date("g:i A") : 'N/A' }} - 
                                                            {{ event.end_time is defined and event.end_time ? event.end_time|date("g:i A") : 'N/A' }}
                                                        </div>
                                                        <small class="text-muted">{{ event.duration ?? 'Duration varies' }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-7 mb-3 mb-md-0">
                                                <h2 class="h5 mb-1">{{ event.title | e }}</h2>
                                                <p class="mb-2">{{ event.description | e }}</p>
                                                <div class="d-flex align-items-center">
                                                    <i class="bi bi-geo-alt me-2 text-secondary"></i>
                                                    <span>{{ event.location | e }}</span>
                                                </div>
                                            </div>
                                            <div class="col-md-2 text-md-end">
                                                <button class="btn btn-outline-primary add-reminder" 
                                                    data-event-name="{{ event.title | e('html_attr') }}" 
                                                    data-event-time="{{ event.start_time | e('html_attr') }}">
                                                    <i class="bi bi-calendar-plus"></i> Add
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle-fill me-2"></i>
                                No evening events scheduled.
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- No Events Fallback -->
                {% if events is not defined or events|length == 0 %}
                    <div class="alert alert-info text-center p-5 mt-4" data-aos="fade-up" data-aos-delay="500">
                        <i class="bi bi-calendar-x fs-1 mb-3 d-block"></i>
                        <h3 class="h5">No events scheduled</h3>
                        <p>Event schedule will be available soon. Please check back later.</p>
                    </div>
                {% endif %}
                
                <!-- Download Schedule CTA -->
                <div class="card bg-light border-0 p-4 mt-5" data-aos="fade-up" data-aos-delay="600">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h3 class="h4 mb-2">Save the Schedule</h3>
                            <p class="mb-md-0">Download the complete Open Day schedule to your device or print it for reference.</p>
                        </div>
                        <div class="col-md-4 text-md-end mt-3 mt-md-0">
                            <a href="#" class="btn btn-primary me-2">
                                <i class="bi bi-download"></i> PDF
                            </a>
                            <a href="#" class="btn btn-outline-primary">
                                <i class="bi bi-printer"></i> Print
                            </a>
                        </div>
                    </div>
                </div>